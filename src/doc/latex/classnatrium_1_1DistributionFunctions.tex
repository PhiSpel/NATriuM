\hypertarget{classnatrium_1_1DistributionFunctions}{
\section{natrium::DistributionFunctions Class Reference}
\label{classnatrium_1_1DistributionFunctions}\index{natrium::DistributionFunctions@{natrium::DistributionFunctions}}
}


This class contains the distribution functions. As the zero-\/velocity particles (f0) can be ignored for streaming, f0 is split from the other distribution functions (fStream) in the implementation. fStream is a block vector, which has the advantage that it can be multiplied with the SystemMatrix. The \hyperlink{classnatrium_1_1DistributionFunctions}{DistributionFunctions} class is designed to mime the behaviour of a vector$<$distributed\_\-vector$>$ .  


{\ttfamily \#include $<$DistributionFunctions.h$>$}\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classnatrium_1_1DistributionFunctions_a3c886085011c99c505cdfc4903e20dfd}{DistributionFunctions} (bool dg=true)
\begin{DoxyCompactList}\small\item\em empty constructor. Construction is done through reinit. \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_af0a970355419acf79be898e573f3149a}{
\hyperlink{classnatrium_1_1DistributionFunctions_af0a970355419acf79be898e573f3149a}{DistributionFunctions} (const \hyperlink{classnatrium_1_1DistributionFunctions}{DistributionFunctions} \&f)}
\label{classnatrium_1_1DistributionFunctions_af0a970355419acf79be898e573f3149a}

\begin{DoxyCompactList}\small\item\em Copy constructor. \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_a43739b1d781e72fa21740dc4dcfe7a54}{
\hyperlink{classnatrium_1_1DistributionFunctions_a43739b1d781e72fa21740dc4dcfe7a54}{DistributionFunctions} (const vector$<$ \hyperlink{namespacenatrium_a903d2b92917f582f2ff05f52160ab811}{distributed\_\-vector} $>$ \&f, bool dg=true)}
\label{classnatrium_1_1DistributionFunctions_a43739b1d781e72fa21740dc4dcfe7a54}

\begin{DoxyCompactList}\small\item\em Copy constructor. Conversion from vector$<$distributed\_\-vector$>$. \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_af965a46fbf124e8f90250c843e615bcd}{
virtual \hyperlink{classnatrium_1_1DistributionFunctions_af965a46fbf124e8f90250c843e615bcd}{$\sim$DistributionFunctions} ()}
\label{classnatrium_1_1DistributionFunctions_af965a46fbf124e8f90250c843e615bcd}

\begin{DoxyCompactList}\small\item\em Destructor. \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_af8b473d257152e9d588030eac9500d08}{
\hyperlink{namespacenatrium_a903d2b92917f582f2ff05f52160ab811}{distributed\_\-vector} \& \hyperlink{classnatrium_1_1DistributionFunctions_af8b473d257152e9d588030eac9500d08}{at} (size\_\-t i)}
\label{classnatrium_1_1DistributionFunctions_af8b473d257152e9d588030eac9500d08}

\begin{DoxyCompactList}\small\item\em mimes std::vector.at(i) \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_a55af3d8382ed4c46d88e86a8f41844f7}{
const \hyperlink{namespacenatrium_a903d2b92917f582f2ff05f52160ab811}{distributed\_\-vector} \& \hyperlink{classnatrium_1_1DistributionFunctions_a55af3d8382ed4c46d88e86a8f41844f7}{at} (size\_\-t i) const }
\label{classnatrium_1_1DistributionFunctions_a55af3d8382ed4c46d88e86a8f41844f7}

\begin{DoxyCompactList}\small\item\em mimes std::vector.at(i) \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_a1a3dd164bf6f2519b142c7eaa950daa6}{
\hyperlink{namespacenatrium_a903d2b92917f582f2ff05f52160ab811}{distributed\_\-vector} \& \hyperlink{classnatrium_1_1DistributionFunctions_a1a3dd164bf6f2519b142c7eaa950daa6}{atGhosted} (size\_\-t i)}
\label{classnatrium_1_1DistributionFunctions_a1a3dd164bf6f2519b142c7eaa950daa6}

\begin{DoxyCompactList}\small\item\em mimes std::vector.at(i) \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_a10d928c2587e6a747ca330f57e72e819}{
const \hyperlink{namespacenatrium_a903d2b92917f582f2ff05f52160ab811}{distributed\_\-vector} \& \hyperlink{classnatrium_1_1DistributionFunctions_a10d928c2587e6a747ca330f57e72e819}{atGhosted} (size\_\-t i) const }
\label{classnatrium_1_1DistributionFunctions_a10d928c2587e6a747ca330f57e72e819}

\begin{DoxyCompactList}\small\item\em mimes std::vector.at(i) \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_a3d76ae4f928f324ec82099dbdce678d7}{
const \hyperlink{namespacenatrium_a903d2b92917f582f2ff05f52160ab811}{distributed\_\-vector} \& \hyperlink{classnatrium_1_1DistributionFunctions_a3d76ae4f928f324ec82099dbdce678d7}{getF0} () const }
\label{classnatrium_1_1DistributionFunctions_a3d76ae4f928f324ec82099dbdce678d7}

\begin{DoxyCompactList}\small\item\em F0 denotes the vector $ f_0 $ (zero-\/velocity particles). \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_abb98df52461532f58e77741dd9b6a975}{
\hyperlink{namespacenatrium_a903d2b92917f582f2ff05f52160ab811}{distributed\_\-vector} \& \hyperlink{classnatrium_1_1DistributionFunctions_abb98df52461532f58e77741dd9b6a975}{getF0} ()}
\label{classnatrium_1_1DistributionFunctions_abb98df52461532f58e77741dd9b6a975}

\begin{DoxyCompactList}\small\item\em F0 denotes the vector $ f_0 $ (zero-\/velocity particles). \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_ae7cc68f9576384b3fbec8f171856f607}{
void \hyperlink{classnatrium_1_1DistributionFunctions_ae7cc68f9576384b3fbec8f171856f607}{setF0} (const \hyperlink{namespacenatrium_a903d2b92917f582f2ff05f52160ab811}{distributed\_\-vector} \&f0)}
\label{classnatrium_1_1DistributionFunctions_ae7cc68f9576384b3fbec8f171856f607}

\begin{DoxyCompactList}\small\item\em F0 denotes the vector $ f_0 $ (zero-\/velocity particles). \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_a74dfe8e6ac6d5f463dcb8220f37800a3}{
distributed\_\-block\_\-vector \& \hyperlink{classnatrium_1_1DistributionFunctions_a74dfe8e6ac6d5f463dcb8220f37800a3}{getFStream} ()}
\label{classnatrium_1_1DistributionFunctions_a74dfe8e6ac6d5f463dcb8220f37800a3}

\begin{DoxyCompactList}\small\item\em FStream denotes the block vector containing the vectors $ f_1, ..., f_Q $. \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_a88224d528262c522ea2ad8bec11178c1}{
const distributed\_\-block\_\-vector \& \hyperlink{classnatrium_1_1DistributionFunctions_a88224d528262c522ea2ad8bec11178c1}{getFStream} () const }
\label{classnatrium_1_1DistributionFunctions_a88224d528262c522ea2ad8bec11178c1}

\begin{DoxyCompactList}\small\item\em FStream denotes the block vector containing the vectors $ f_1, ..., f_Q $. \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_a79d29cb24887e83728fb2f94b611ecb8}{
const \hyperlink{namespacenatrium_a903d2b92917f582f2ff05f52160ab811}{distributed\_\-vector} \& \hyperlink{classnatrium_1_1DistributionFunctions_a79d29cb24887e83728fb2f94b611ecb8}{getF0Ghosted} ()}
\label{classnatrium_1_1DistributionFunctions_a79d29cb24887e83728fb2f94b611ecb8}

\begin{DoxyCompactList}\small\item\em F0 denotes the vector $ f_0 $ (zero-\/velocity particles). \item\end{DoxyCompactList}\item 
const distributed\_\-block\_\-vector \& \hyperlink{classnatrium_1_1DistributionFunctions_acc97fc1ac5185c94d8d15024c168b6c2}{getFStreamGhosted} () const 
\begin{DoxyCompactList}\small\item\em F0 denotes the vector $ f_0 $ (zero-\/velocity particles). \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_ad0ada0c54968a61f78eb1b82eb6c5a68}{
void \hyperlink{classnatrium_1_1DistributionFunctions_ad0ada0c54968a61f78eb1b82eb6c5a68}{setFStream} (const distributed\_\-block\_\-vector \&fStream)}
\label{classnatrium_1_1DistributionFunctions_ad0ada0c54968a61f78eb1b82eb6c5a68}

\begin{DoxyCompactList}\small\item\em FStream denotes the block vector containing the vectors $ f_1, ..., f_Q $. \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_a2ab8e5abf8cdef76f62e443a8dde5fd4}{
size\_\-t \hyperlink{classnatrium_1_1DistributionFunctions_a2ab8e5abf8cdef76f62e443a8dde5fd4}{getQ} () const }
\label{classnatrium_1_1DistributionFunctions_a2ab8e5abf8cdef76f62e443a8dde5fd4}

\begin{DoxyCompactList}\small\item\em the number of discrete velocities \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_aefd3e3b6c39358653ac9531fa9f6f357}{
void \hyperlink{classnatrium_1_1DistributionFunctions_aefd3e3b6c39358653ac9531fa9f6f357}{reinit} (size\_\-t Q, const dealii::IndexSet \&local, const dealii::IndexSet \&relevant, const MPI\_\-Comm \&communicator=MPI\_\-COMM\_\-WORLD)}
\label{classnatrium_1_1DistributionFunctions_aefd3e3b6c39358653ac9531fa9f6f357}

\begin{DoxyCompactList}\small\item\em reinitialize the sizes of the distribution functions -\/ with ghost elements \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_a4a188cee7a5362588da36e30f616f446}{
void \hyperlink{classnatrium_1_1DistributionFunctions_a4a188cee7a5362588da36e30f616f446}{reinit} (size\_\-t Q, const dealii::IndexSet \&local, const MPI\_\-Comm \&communicator=MPI\_\-COMM\_\-WORLD)}
\label{classnatrium_1_1DistributionFunctions_a4a188cee7a5362588da36e30f616f446}

\begin{DoxyCompactList}\small\item\em reinitialize the sizes of the distribution functions -\/ without ghost elements \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_a636814c639143c76989b09b2a92b6757}{
size\_\-t \hyperlink{classnatrium_1_1DistributionFunctions_a636814c639143c76989b09b2a92b6757}{size} () const }
\label{classnatrium_1_1DistributionFunctions_a636814c639143c76989b09b2a92b6757}

\begin{DoxyCompactList}\small\item\em the number of discrete velocities, including zero \item\end{DoxyCompactList}\item 
void \hyperlink{classnatrium_1_1DistributionFunctions_a5b0afbafe841922dd3f949cc315b5533}{compress} (dealii::VectorOperation::values operation)
\begin{DoxyCompactList}\small\item\em call dealii's compress function to all distributed\_\-vectors stored herein. Compress has to be called, whenever the elements of a vector have been changed by hand. It distributes the local information to the other processors, if required. \item\end{DoxyCompactList}\item 
void \hyperlink{classnatrium_1_1DistributionFunctions_a5e61cb3ba258cf0958e1557061ed31b9}{operator=} (const \hyperlink{classnatrium_1_1DistributionFunctions}{DistributionFunctions} \&other)
\begin{DoxyCompactList}\small\item\em call operator= for all distribution functions \item\end{DoxyCompactList}\item 
bool \hyperlink{classnatrium_1_1DistributionFunctions_af7132264087f7000ffe8b191210b4552}{equals} (const \hyperlink{classnatrium_1_1DistributionFunctions}{DistributionFunctions} \&other, double threshold=1e-\/8) const 
\begin{DoxyCompactList}\small\item\em checks whether two DistributionFunction objects are equal wrt. a given threshold. Use carefully: vectors are only considered equal if they have the same distributions among processors. \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_a337f35635db75aaecfc7dde998e3321d}{
void {\bfseries transferFromOtherScaling} (const \hyperlink{classnatrium_1_1Stencil}{Stencil} \&old\_\-stencil, const \hyperlink{classnatrium_1_1Stencil}{Stencil} \&new\_\-stencil, const dealii::IndexSet \&locally\_\-owned\_\-dofs)}
\label{classnatrium_1_1DistributionFunctions_a337f35635db75aaecfc7dde998e3321d}

\item 
\hypertarget{classnatrium_1_1DistributionFunctions_a3942c2287df5372698ca987288a902e8}{
size\_\-t {\bfseries memory\_\-consumption} () const }
\label{classnatrium_1_1DistributionFunctions_a3942c2287df5372698ca987288a902e8}

\item 
\hypertarget{classnatrium_1_1DistributionFunctions_acbfa4e0f94855fb32ad486cddec2d597}{
void \hyperlink{classnatrium_1_1DistributionFunctions_acbfa4e0f94855fb32ad486cddec2d597}{updateGhosted} ()}
\label{classnatrium_1_1DistributionFunctions_acbfa4e0f94855fb32ad486cddec2d597}

\begin{DoxyCompactList}\small\item\em update ghosted distributions, i.e. communicate over MPI processes It is very! important! that after each manipulation of the distribution functions, you call \hyperlink{classnatrium_1_1DistributionFunctions_acbfa4e0f94855fb32ad486cddec2d597}{updateGhosted()}. Otherwise you might get terrible errors at boundaries, (or in other parts, e.g. calculating the entropy), due to the fact that your distributions at ghost nodes are not up to date. \item\end{DoxyCompactList}\item 
\hypertarget{classnatrium_1_1DistributionFunctions_a95ebd185a8c5df260a538206b4db9759}{
bool {\bfseries isDg} () const }
\label{classnatrium_1_1DistributionFunctions_a95ebd185a8c5df260a538206b4db9759}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
This class contains the distribution functions. As the zero-\/velocity particles (f0) can be ignored for streaming, f0 is split from the other distribution functions (fStream) in the implementation. fStream is a block vector, which has the advantage that it can be multiplied with the SystemMatrix. The \hyperlink{classnatrium_1_1DistributionFunctions}{DistributionFunctions} class is designed to mime the behaviour of a vector$<$distributed\_\-vector$>$ . 

\subsection{Constructor \& Destructor Documentation}
\hypertarget{classnatrium_1_1DistributionFunctions_a3c886085011c99c505cdfc4903e20dfd}{
\index{natrium::DistributionFunctions@{natrium::DistributionFunctions}!DistributionFunctions@{DistributionFunctions}}
\index{DistributionFunctions@{DistributionFunctions}!natrium::DistributionFunctions@{natrium::DistributionFunctions}}
\subsubsection[{DistributionFunctions}]{\setlength{\rightskip}{0pt plus 5cm}natrium::DistributionFunctions::DistributionFunctions (bool {\em dg} = {\ttfamily true})\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classnatrium_1_1DistributionFunctions_a3c886085011c99c505cdfc4903e20dfd}


empty constructor. Construction is done through reinit. 
\begin{DoxyParams}{Parameters}
\item[{\em dg}]flag that indicates whether we have a parallel DG discretization; in this case, we do not need ghosted elements as all local dof indices are in fact locally owned on the current MPI process \end{DoxyParams}


\subsection{Member Function Documentation}
\hypertarget{classnatrium_1_1DistributionFunctions_a5b0afbafe841922dd3f949cc315b5533}{
\index{natrium::DistributionFunctions@{natrium::DistributionFunctions}!compress@{compress}}
\index{compress@{compress}!natrium::DistributionFunctions@{natrium::DistributionFunctions}}
\subsubsection[{compress}]{\setlength{\rightskip}{0pt plus 5cm}void natrium::DistributionFunctions::compress (dealii::VectorOperation::values {\em operation})}}
\label{classnatrium_1_1DistributionFunctions_a5b0afbafe841922dd3f949cc315b5533}


call dealii's compress function to all distributed\_\-vectors stored herein. Compress has to be called, whenever the elements of a vector have been changed by hand. It distributes the local information to the other processors, if required. 
\begin{DoxyParams}{Parameters}
\item[\mbox{$\leftarrow$} {\em operation}]specifies, if element was inserted or added. Operation has to be dealii::VectorOperation::add or dealii::VectorOperation::compress \end{DoxyParams}
\hypertarget{classnatrium_1_1DistributionFunctions_af7132264087f7000ffe8b191210b4552}{
\index{natrium::DistributionFunctions@{natrium::DistributionFunctions}!equals@{equals}}
\index{equals@{equals}!natrium::DistributionFunctions@{natrium::DistributionFunctions}}
\subsubsection[{equals}]{\setlength{\rightskip}{0pt plus 5cm}bool natrium::DistributionFunctions::equals (const {\bf DistributionFunctions} \& {\em other}, \/  double {\em threshold} = {\ttfamily 1e-\/8}) const}}
\label{classnatrium_1_1DistributionFunctions_af7132264087f7000ffe8b191210b4552}


checks whether two DistributionFunction objects are equal wrt. a given threshold. Use carefully: vectors are only considered equal if they have the same distributions among processors. 
\begin{DoxyParams}{Parameters}
\item[{\em other}]Other DistributionFunction \item[{\em threshold}]threshold (default: 1e-\/10) \end{DoxyParams}
\begin{DoxyNote}{Note}
If you want to compare vectors that have different distributions among processors, you can work around this functions using Vector::add(v, allow\_\-different\_\-maps = true ) and check whether the entries are close to zero (requires additional memory) 
\end{DoxyNote}
\hypertarget{classnatrium_1_1DistributionFunctions_acc97fc1ac5185c94d8d15024c168b6c2}{
\index{natrium::DistributionFunctions@{natrium::DistributionFunctions}!getFStreamGhosted@{getFStreamGhosted}}
\index{getFStreamGhosted@{getFStreamGhosted}!natrium::DistributionFunctions@{natrium::DistributionFunctions}}
\subsubsection[{getFStreamGhosted}]{\setlength{\rightskip}{0pt plus 5cm}const distributed\_\-block\_\-vector\& natrium::DistributionFunctions::getFStreamGhosted () const\hspace{0.3cm}{\ttfamily  \mbox{[}inline\mbox{]}}}}
\label{classnatrium_1_1DistributionFunctions_acc97fc1ac5185c94d8d15024c168b6c2}


F0 denotes the vector $ f_0 $ (zero-\/velocity particles). FStream denotes the block vector containing the vectors $ f_1, ..., f_Q $ FStream denotes the block vector containing the vectors $ f_1, ..., f_Q $ \hypertarget{classnatrium_1_1DistributionFunctions_a5e61cb3ba258cf0958e1557061ed31b9}{
\index{natrium::DistributionFunctions@{natrium::DistributionFunctions}!operator=@{operator=}}
\index{operator=@{operator=}!natrium::DistributionFunctions@{natrium::DistributionFunctions}}
\subsubsection[{operator=}]{\setlength{\rightskip}{0pt plus 5cm}void natrium::DistributionFunctions::operator= (const {\bf DistributionFunctions} \& {\em other})}}
\label{classnatrium_1_1DistributionFunctions_a5e61cb3ba258cf0958e1557061ed31b9}


call operator= for all distribution functions \begin{DoxyNote}{Note}
is only allowed for \hyperlink{classnatrium_1_1DistributionFunctions}{DistributionFunctions} of equal size 
\end{DoxyNote}


The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
/mnt/fdrive/akraem3m/workspace/NATriuM/src/library/natrium/solver/DistributionFunctions.h\item 
/mnt/fdrive/akraem3m/workspace/NATriuM/src/library/natrium/solver/\hyperlink{DistributionFunctions_8cpp}{DistributionFunctions.cpp}\end{DoxyCompactItemize}
